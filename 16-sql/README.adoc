== 16. SQL

PostgreSQL database

    docker run -d --name pg11testdb -e POSTGRES_DB=testdb -e POSTGRES_USER=user -e POSTGRES_PASSWORD=password -p 3432:5432 postgres:11

+++ <details><summary> +++
*Salespeople (Продавцы)*
+++ </summary><div> +++

[width="77%"]
|=======
|Snum  |integer   |NOT NULL |Номер продавца
|Sname |char (10) |NOT NULL |Имя продавца
|city  |char (10) |         |Город
|comm  |decimal   |         |Комиссионные
|=======
+++ </div></details> +++

+++ <details><summary> +++
*Customers (Заказчики)*
+++ </summary><div> +++

[width="77%"]
|=======
|cnum   |integer   | NOT NULL |Номер заказчика
|cname  |char (10) | NOT NULL |Имя заказчика
|city   |char (10) |          |Город
|rating |integer   |          |Рейтинг
|snum   |integer   |          |Номер продавца
|=======
+++ </div></details> +++

+++ <details><summary> +++
*Orders (Заказы)*
+++ </summary><div> +++

[width="77%"]
|=======
|onum   |integer       | NOT NULL |Номер заказа
|amt    |decimal(10,2) |          |Имя заказчика
|odate  |date          |          |Дата
|cnum   |integer       |          |Номер заказчика
|snum   |integer       |          |Номер продавца
|=======
+++ </div></details> +++

=== Задачи

===== Оператор SELECT
1. Выбрать всех Продавцов.
2. Выбрать всех Заказчиков с рейтингом больше 100. Показать ‘Номер заказчика’ и
‘Наименование’.
3. Выбрать всех Заказчиков связанных с продавцами 1001 и 1002. Показать ‘Номер заказчика’ и
‘Наименование’, ‘Номер продавца’.
4. Выбрать всех Продавцов у которых имя города начинается на букву L.

===== Операции соединения, подзапросы и агрегатные функции
1. Показать информацию о Заказчиках и Продавцах, где Заказчики связаны с Продавцами с
номерами 1002 и 1003.
2. Выбрать Заказчика с максимальной ценой заказа.
3. Выбрать Заказчиков у которых были заказы с 10/03/1990 по 10/05/1990.

===== Операции GROUP BY и HAVING, ORDER BY
1. Выбрать Заказчика сумма заказов которого максимальна.
2. Сколько было Заказов в разрезе дат?
3. Какова стоимость Заказов за каждую дату?

===== Операции INSERT, UPDATE, DELETE
1. Добавить 2 записи во все таблицы.
2. Добавить 2 записи в таблицу Заказчики с полем snum = NULL. Выбрать Заказчиков ,которые
связаны с Продавцами. Выбрать Заказчиков, которые не связанные с продавцами.
3. Удалить записи о Заказчиках, которые не связаны с Продавцами.
